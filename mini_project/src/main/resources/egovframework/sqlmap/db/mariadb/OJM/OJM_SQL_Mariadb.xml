<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >

<sqlMap namespace="OjmServiceDAO">

	<typeAlias alias="egovMap"
		type="egovframework.rte.psl.dataaccess.util.EgovMap" />
	<typeAlias alias="loginVO"
		type="egovframework.ojm.service.LoginVO" /> <!-- egovframework.ojm.service.LoginVO를 loginVO로 알리아스를 둠 -->
	<typeAlias alias="mainVO"
		type="egovframework.ojm.service.MainVO" /> <!-- egovframework.ojm.service.LoginVO를 loginVO로 알리아스를 둠 -->

	<select id="OjmServiceDAO.loginAction" resultClass="loginVO">
	<![CDATA[
		select
		user_id
		from
		user
		where
		user_id = #user_id#
		and
		password = #password#
	]]>
	</select>

	<select id="OjmServiceDAO.getVoteList" resultClass="MainVO">
	<![CDATA[
		select 
		vote_seq ,
		vote_nm ,
		u.user_id ,
		date_format(end_date, '%H:%i') as end_date
		from
		vote v 
		join 
		user u 
		on
		v.registrant_seq = u.user_seq
		where end_date > curdate() ;
	
	]]>

	</select>







</sqlMap>
